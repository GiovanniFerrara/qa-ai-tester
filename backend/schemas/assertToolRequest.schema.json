{
  "$ref": "#/definitions/AssertToolRequest",
  "definitions": {
    "AssertToolRequest": {
      "type": "object",
      "properties": {
        "severity": {
          "type": "string",
          "enum": [
            "blocker",
            "critical",
            "major",
            "minor",
            "info"
          ]
        },
        "category": {
          "type": "string",
          "enum": [
            "functional",
            "data-consistency",
            "performance",
            "a11y",
            "reliability"
          ]
        },
        "assertion": {
          "type": "string"
        },
        "expected": {
          "type": "string"
        },
        "observed": {
          "type": "string"
        },
        "tolerance": {
          "type": [
            "string",
            "null"
          ]
        },
        "evidence": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "screenshotRef": {
                "type": "string"
              },
              "selector": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "time": {
                "type": "string",
                "description": "ISO 8601 timestamp (e.g., \"2025-01-18T21:38:33Z\")"
              },
              "networkRequestId": {
                "type": [
                  "string",
                  "null"
                ]
              }
            },
            "required": [
              "screenshotRef",
              "selector",
              "time",
              "networkRequestId"
            ],
            "additionalProperties": false
          }
        },
        "suggestedFix": {
          "type": "string"
        },
        "confidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        }
      },
      "required": [
        "severity",
        "category",
        "assertion",
        "expected",
        "observed",
        "tolerance",
        "evidence",
        "suggestedFix",
        "confidence"
      ],
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}